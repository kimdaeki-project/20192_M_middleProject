<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="noticeMapper">

 	<sql id="ds">
  		<choose>
 			<when test="kind == 'kc'">
				where reg_date like '%'||#{search}||'%'
			</when> 
		</choose>
  	</sql>

	<select id="noticeList" resultType="NoticeVO" parameterType="Pager">
		 select * from (select N.*, rownum R from
		(select * from notice	
		<include refid="ds"></include>		
		order by notice_num desc) N)
		where R between #{startRow} and #{lastRow} 
	
	</select>

	
	<select id="noticeSelect" parameterType="NoticeVO" resultType="NoticeVO">
		select * from notice 
		where notice_num = #{notice_num}
	</select>
	

	<insert id="noticeWrite" parameterType="NoticeVO">
<!-- 		insert into notice ( title, contents, reg_date, hit, id)
		values( #{title}, #{contents}, SYSDATE, 0,  #{id}) -->
		
		INSERT INTO notice(notice_num, title ,	contents   ,	reg_date,  hit, id)
 		     	  VALUES(board_seq.nextval, #{title},  #{contents},    SYSDATE,   0,  #{id}) 	

	</insert> 
	
 	<update id="noticeUpdate" parameterType="NoticeVO">
		update notice set title=#{title}, contents=#{contents}
		where notice_num=#{notice_num}
	</update>
	
	<delete id="noticeDelete" parameterType="NoticeVO">
		delete notice where notice_num =#{notice_num}
	</delete>
	
	<select id="noticeCount" resultType="Integer" parameterType="Pager">
 		SELECT COUNT(id) FROM notice
 	</select> 

</mapper>    